"use strict";(self.webpackChunk_manufac_reactjs_calendar_heatmap=self.webpackChunk_manufac_reactjs_calendar_heatmap||[]).push([[932],{"./src/YearOverviewHeatmap/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{q:()=>YearOverviewHeatMap});__webpack_require__("./node_modules/core-js/modules/es.object.keys.js"),__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.array.is-array.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.array.from.js"),__webpack_require__("./node_modules/core-js/modules/es.date.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.array.map.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("./node_modules/core-js/modules/es.array.filter.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js");var src=__webpack_require__("./node_modules/d3/src/index.js"),startOfYear=__webpack_require__("./node_modules/date-fns/esm/startOfYear/index.js"),endOfYear=__webpack_require__("./node_modules/date-fns/esm/endOfYear/index.js"),react=__webpack_require__("./node_modules/react/index.js"),utils=__webpack_require__("./src/utils.ts"),axis=(__webpack_require__("./node_modules/core-js/modules/es.array.reduce.js"),__webpack_require__("./node_modules/core-js/modules/es.date.to-iso-string.js"),__webpack_require__("./node_modules/core-js/modules/es.object.entries.js"),__webpack_require__("./node_modules/core-js/modules/es.string.split.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.exec.js"),__webpack_require__("./node_modules/core-js/modules/es.number.parse-int.js"),__webpack_require__("./node_modules/core-js/modules/es.number.constructor.js"),__webpack_require__("./node_modules/core-js/modules/es.array.concat.js"),__webpack_require__("./node_modules/@d3fc/d3fc-axis/src/axis.js")),format=__webpack_require__("./node_modules/date-fns/esm/format/index.js");function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||_unsupportedIterableToArray(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function getMonthBoundaryPath(date,xScale,yScale){var week=Number.parseInt((0,format.Z)(date,"I"))-1,day=Number.parseInt((0,format.Z)(date,"i"))-1;return(0===day?"M"+week*xScale.bandwidth()+",0":"M"+(week+1)*xScale.bandwidth()+",0\n         V"+day*yScale.bandwidth()+"\n         H"+week*xScale.bandwidth())+"V"+7*yScale.bandwidth()}function fadeMonthBoundaries(){(0,src.td_)(".month-boundary").transition().duration(500).ease(src.Nyw).style("opacity",.2)}function brightenMonthBoundaries(){(0,src.td_)(".month-boundary").transition().duration(500).ease(src.Nyw).style("opacity",1)}function getMonthScaleAndAxis(_ref3){var xScaleAndAxis,weekPositions=_ref3.weekPositions,element=_ref3.element,margin=_ref3.margin,response=_ref3.response,year=_ref3.year,scaleType=_ref3.scaleType,monthLabels=_ref3.monthLabels;if("threshold"===scaleType)xScaleAndAxis=function getMonthThresholdScaleAndAxis(_ref){var weekPositions=_ref.weekPositions,element=_ref.element,margin=_ref.margin,monthLabels=_ref.monthLabels,response=_ref.response,monthScaleDomain=[].concat(_toConsumableArray(weekPositions),[53]),monthAxisWidth=element.clientWidth-margin.left-margin.right;monthAxisWidth=monthAxisWidth>0?monthAxisWidth:0;var monthScaleRange=monthScaleDomain.map((function(ele){return(ele-1)/52*monthAxisWidth})),monthScale=(0,src.ut0)().domain(monthScaleDomain).range([0].concat(_toConsumableArray(monthScaleRange),[monthAxisWidth])),monthAxis=(0,axis.F5)(monthScale).tickSize(0).tickCenterLabel(!0).tickFormat((function(_,i){return monthLabels[i]}));return[monthScale,(0,utils.Xe)(monthAxis,response)]}({weekPositions,element,margin,response,monthLabels});else xScaleAndAxis=function getMonthTimeScaleAndAxis(_ref2){var element=_ref2.element,margin=_ref2.margin,response=_ref2.response,year=_ref2.year,monthAxisWidth=element.clientWidth-margin.left-margin.right;monthAxisWidth=monthAxisWidth>0?monthAxisWidth:0;var monthScale=(0,src.Xf)().domain([new Date(year,0,1),new Date(year,11,31)]).range([0,monthAxisWidth]),monthAxis=(0,axis.F5)(monthScale).tickSize(0).tickFormat((function(d){return d.toLocaleString(void 0,{month:"short"})}));return[monthScale,(0,utils.Xe)(monthAxis,response)]}({element,margin,response,year});return xScaleAndAxis}var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),_excluded=["data","color","onTooltip","onHideTooltip","onCellClick","onMonthLabelClick","fade","onFadeComplete","response","showWeekLabels","scaleType"];function YearOverviewHeatmap_slicedToArray(arr,i){return function YearOverviewHeatmap_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function YearOverviewHeatmap_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function YearOverviewHeatmap_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return YearOverviewHeatmap_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return YearOverviewHeatmap_arrayLikeToArray(o,minLen)}(arr,i)||function YearOverviewHeatmap_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function YearOverviewHeatmap_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function YearOverviewHeatMap(_ref){var data=_ref.data,color=_ref.color,onTooltip=_ref.onTooltip,onHideTooltip=_ref.onHideTooltip,onCellClick=_ref.onCellClick,onMonthLabelClick=_ref.onMonthLabelClick,fade=_ref.fade,onFadeComplete=_ref.onFadeComplete,response=_ref.response,showWeekLabels=_ref.showWeekLabels,scaleType=_ref.scaleType,rest=_objectWithoutProperties(_ref,_excluded),ref=(0,react.useRef)(null);return(0,react.useEffect)((function(){var margin={top:50,bottom:50,left:50,right:50},svg=void 0,resize=void 0;if(null!==ref.current&&data.length>0){var _getYearData=function getYearData(data){var _minTotal,_maxTotal,minTotal,maxTotal,monthFormat=new Intl.DateTimeFormat(void 0,{month:"short"}).format,dataArray=[];if(data.length>0){var dataRecord=data.reduce((function(acc,curr){var _Object$assign,date=new Date(curr.date);return Object.assign({},acc,((_Object$assign={})[(0,format.Z)(date,"I")+","+(0,format.Z)(date,"i")+","+monthFormat(date)]=curr,_Object$assign))}),{}),selectedDate=new Date(data[0].date),minDate=(0,startOfYear.Z)(selectedDate),maxDate=(0,endOfYear.Z)(selectedDate),consecutiveDatesRecord=(0,src.Nus)(minDate,maxDate).reduce((function(acc,curr){var _Object$assign2;return Object.assign({},acc,((_Object$assign2={})[(0,format.Z)(curr,"I")+","+(0,format.Z)(curr,"i")+","+monthFormat(curr)]={date:curr.toISOString(),total:NaN},_Object$assign2))}),{}),combinedData=Object.assign({},consecutiveDatesRecord,dataRecord);dataArray=Object.entries(combinedData).map((function(d){var _d$0$split2=_slicedToArray(d[0].split(","),3),week=_d$0$split2[0],day=_d$0$split2[1],month=_d$0$split2[2],date=d[1].date;return{day:Number.parseInt(day,10),week:Number.parseInt(week,10),month,total:d[1].total,date:new Date(date)}})),dataArray=(0,utils.yF)(dataArray);var _extent2=_slicedToArray((0,src.Wem)(dataArray,(function(d){return d.total})),2);minTotal=_extent2[0],maxTotal=_extent2[1]}return{dataArray,totalExtent:[null!==(_minTotal=minTotal)&&void 0!==_minTotal?_minTotal:NaN,null!==(_maxTotal=maxTotal)&&void 0!==_maxTotal?_maxTotal:NaN]}}(data),dataArray=_getYearData.dataArray,_totalExtent=YearOverviewHeatmap_slicedToArray(_getYearData.totalExtent,2),minTotal=_totalExtent[0],maxTotal=_totalExtent[1],colorGenerator=(0,utils.D0)(minTotal,maxTotal,color),selectedDate=new Date(data[0].date),monthDates=(0,src.K_h)((0,startOfYear.Z)(selectedDate),(0,endOfYear.Z)(selectedDate)),dayLabels=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],weekLabels=(0,src.w6H)(1,54).map((function(e){return e.toString()})),monthLabels=monthDates.map((function(e){return e.toLocaleString(void 0,{month:"short"})})),firstWeekPositions=monthDates.map((function(d){return function getWeekPosition(firstDateOfMonth){var firstWeekOfMonth=Number.parseInt((0,format.Z)(firstDateOfMonth,"I"),10);return 0===firstDateOfMonth.getMonth()?1:firstWeekOfMonth}(d)})),_getXScaleAndAxis2=YearOverviewHeatmap_slicedToArray((0,utils.DW)({labels:weekLabels,element:ref.current,margin,paddingInner:0,response,align:"bottom"}),2),xScale=_getXScaleAndAxis2[0],xAxis=_getXScaleAndAxis2[1],_getYScaleAndAxis2=YearOverviewHeatmap_slicedToArray((0,utils.jH)({labels:dayLabels,element:ref.current,margin,paddingInner:0,response}),2),yScale=_getYScaleAndAxis2[0],yAxis=_getYScaleAndAxis2[1],monthAxis=YearOverviewHeatmap_slicedToArray(getMonthScaleAndAxis({weekPositions:firstWeekPositions,element:ref.current,margin,response,year:new Date(data[0].date).getFullYear(),monthLabels,scaleType}),2)[1],parent=(svg=(0,src.Ys)(ref.current).append("svg").attr("width","100%").attr("height","100%").style("cursor","pointer")).append("g").attr("transform","translate("+margin.left+", "+margin.top+")");!0===showWeekLabels&&svg.append("g").attr("transform","translate("+margin.left+", "+(ref.current.clientHeight-margin.bottom)+")").attr("class","x-axis week").call(xAxis),svg.append("g").attr("transform","translate("+margin.left+", "+margin.top+")").attr("class","x-axis month").call(monthAxis),svg.append("g").attr("transform","translate("+margin.left+", "+margin.top+")").attr("class","y-axis").call(yAxis),parent.selectAll(".heat-cell").data(dataArray).enter().append("rect").attr("class","heat-cell").attr("width",xScale.bandwidth()).attr("height",yScale.bandwidth()).attr("x",(function(d){var _xScale;return null!==(_xScale=xScale(weekLabels[d.week-1]))&&void 0!==_xScale?_xScale:0})).attr("y",(function(d){var _yScale;return null!==(_yScale=yScale(dayLabels[d.day-1]))&&void 0!==_yScale?_yScale:0})).attr("fill",(function(d){return(0,utils.Lq)(colorGenerator,d.total)})).attr("stroke-width",.1).attr("pointer-events",(function(d){return 0===d.total?"none":"visiblePainted"})).attr("stroke","var(--background_color)"),parent.append("g").selectAll(".month-boundary").data(monthDates.slice(1)).enter().append("path").attr("class","month-boundary").attr("fill","none").attr("stroke","var(--background_color)").attr("stroke-width",3).attr("d",(function(d){return getMonthBoundaryPath(d,xScale,yScale)})),(0,src.td_)(".x-axis , .y-axis").selectAll("text").attr("fill","var(--primary_color)"),(0,src.td_)(".x-axis, .y-axis").selectAll("path").attr("stroke","var(--primary_color)"),(0,src.td_)(".heat-cell").on("mouseover",(function(e,datum){(0,src.Ys)(e.currentTarget).attr("fill-opacity",.4),null==onTooltip||onTooltip({value:datum})})).on("mousemove",(function(_e,datum){null==onTooltip||onTooltip({value:datum})})).on("mouseout",(function(e){(0,src.Ys)(e.currentTarget).attr("fill-opacity",1),null==onHideTooltip||onHideTooltip()})).on("click",(function(_e,datum){(0,utils.Fe)([".heat-cell",".x-axis",".y-axis",".month-boundary"]).then((function(){null==onCellClick||onCellClick(datum)}))})),(0,src.Ys)(".y-axis").selectAll("text").on("mouseover",(function(_e,tickLabel){(0,src.td_)(".heat-cell").filter((function(d){return dayLabels[d.day-1]!==tickLabel})).transition().duration(500).ease(src.Nyw).attr("fill-opacity",.2),fadeMonthBoundaries()})).on("mouseout",(function(){(0,src.td_)(".heat-cell").transition().duration(500).ease(src.Nyw).attr("fill-opacity",1),brightenMonthBoundaries()})),(0,src.Ys)(".x-axis.month").selectAll("text").on("mouseover",(function(e){var _e$currentTarget$text,monthLabel=null!==(_e$currentTarget$text=e.currentTarget.textContent)&&void 0!==_e$currentTarget$text?_e$currentTarget$text:"";(0,src.td_)(".heat-cell").filter((function(d){return d.month!==monthLabel})).transition().duration(500).ease(src.Nyw).attr("fill-opacity",.2),fadeMonthBoundaries()})).on("mouseout",(function(){(0,src.td_)(".heat-cell").transition().duration(500).ease(src.Nyw).attr("fill-opacity",1),brightenMonthBoundaries()})).on("click",(function(e){var _e$currentTarget$text2,monthLabel=null!==(_e$currentTarget$text2=e.currentTarget.textContent)&&void 0!==_e$currentTarget$text2?_e$currentTarget$text2:"";(0,utils.Fe)([".heat-cell",".x-axis",".y-axis",".month-boundary"]).then((function(){null==onMonthLabelClick||onMonthLabelClick(monthLabel)}))})),resize=function resize(){if(null!==ref.current){var _getXScaleAndAxis4=YearOverviewHeatmap_slicedToArray((0,utils.DW)({labels:weekLabels,element:ref.current,margin,paddingInner:0,response,align:"bottom"}),2),newXScale=_getXScaleAndAxis4[0],newXAxis=_getXScaleAndAxis4[1],newMonthAxis=YearOverviewHeatmap_slicedToArray(getMonthScaleAndAxis({weekPositions:firstWeekPositions,element:ref.current,margin,response,year:new Date(data[0].date).getFullYear(),monthLabels,scaleType}),2)[1],_getYScaleAndAxis4=YearOverviewHeatmap_slicedToArray((0,utils.jH)({labels:dayLabels,element:ref.current,margin,paddingInner:0,response}),2),newYScale=_getYScaleAndAxis4[0],newYAxis=_getYScaleAndAxis4[1];!0===showWeekLabels&&(0,src.Ys)(".x-axis.week").call(newXAxis).attr("transform","translate("+margin.left+", "+(ref.current.clientHeight-margin.bottom)+")"),(0,src.Ys)(".x-axis.month").call(newMonthAxis),(0,src.Ys)(".y-axis").call(newYAxis),(0,src.td_)(".heat-cell").transition().duration(500).ease(src.Nyw).attr("width",newXScale.bandwidth()).attr("height",newYScale.bandwidth()).attr("x",(function(d){var _newXScale;return null!==(_newXScale=newXScale(weekLabels[d.week-1]))&&void 0!==_newXScale?_newXScale:0})).attr("y",(function(d){var _newYScale;return null!==(_newYScale=newYScale(dayLabels[d.day-1]))&&void 0!==_newYScale?_newYScale:0})),(0,src.td_)(".month-boundary").transition().duration(500).ease(src.Nyw).attr("d",(function(d){return getMonthBoundaryPath(d,newXScale,newYScale)}))}},window.addEventListener("resize",resize)}return function(){var _svg;void 0!==resize&&window.removeEventListener("resize",resize),null===(_svg=svg)||void 0===_svg||_svg.remove()}}),[color,data,onCellClick,onMonthLabelClick,onHideTooltip,onTooltip,response,showWeekLabels,scaleType]),(0,react.useEffect)((function(){!0===fade&&(0,utils.Fe)([".heat-cell",".x-axis",".y-axis",".month-boundary"]).then((function(){null==onFadeComplete||onFadeComplete()}))}),[fade,onFadeComplete]),(0,jsx_runtime.jsx)("div",Object.assign({},rest,{style:Object.assign({width:"100%",height:"100%",boxSizing:"border-box"},rest.style),ref}))}YearOverviewHeatMap.displayName="YearOverviewHeatMap";try{YearOverviewHeatMap.displayName="YearOverviewHeatMap",YearOverviewHeatMap.__docgenInfo={description:"Ref: https://bl.ocks.org/Bl3f/cdb5ad854b376765fa99",displayName:"YearOverviewHeatMap",props:{data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"CalendarHeatmapDatum[]"}},showWeekLabels:{defaultValue:null,description:"",name:"showWeekLabels",required:!1,type:{name:"boolean"}},scaleType:{defaultValue:null,description:"",name:"scaleType",required:!1,type:{name:"enum",value:[{value:'"time"'},{value:'"threshold"'}]}},onMonthLabelClick:{defaultValue:null,description:"",name:"onMonthLabelClick",required:!1,type:{name:"((d: string) => void)"}},color:{defaultValue:null,description:"",name:"color",required:!1,type:{name:"string"}},fade:{defaultValue:null,description:"",name:"fade",required:!1,type:{name:"boolean"}},response:{defaultValue:null,description:"",name:"response",required:!1,type:{name:"enum",value:[{value:'"rotate"'},{value:'"offset"'},{value:'"hide"'}]}},onCellClick:{defaultValue:null,description:"",name:"onCellClick",required:!1,type:{name:"((d: YearOverviewDatum) => void)"}},onTooltip:{defaultValue:null,description:"",name:"onTooltip",required:!1,type:{name:"((datum: { value: unknown; }) => void)"}},onHideTooltip:{defaultValue:null,description:"",name:"onHideTooltip",required:!1,type:{name:"(() => void)"}},onFadeComplete:{defaultValue:null,description:"",name:"onFadeComplete",required:!1,type:{name:"(() => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/YearOverviewHeatmap/index.tsx#YearOverviewHeatMap"]={docgenInfo:YearOverviewHeatMap.__docgenInfo,name:"YearOverviewHeatMap",path:"src/YearOverviewHeatmap/index.tsx#YearOverviewHeatMap"})}catch(__react_docgen_typescript_loader_error){}},"./src/dev-utils.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{D:()=>generateStorySampleDataForHeatmap});__webpack_require__("./node_modules/core-js/modules/es.date.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.array.map.js"),__webpack_require__("./node_modules/core-js/modules/es.date.to-iso-string.js"),__webpack_require__("./node_modules/core-js/modules/es.array.reduce.js");var d3__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/d3/src/index.js"),date_fns__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/date-fns/esm/endOfYear/index.js"),date_fns__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/date-fns/esm/subYears/index.js"),date_fns__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/date-fns/esm/startOfYear/index.js"),date_fns__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/date-fns/esm/startOfDay/index.js"),date_fns__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/date-fns/esm/endOfDay/index.js");function generateStorySampleDataForHeatmap(yearsAgo,binsPerHour){var lastDate=(0,date_fns__WEBPACK_IMPORTED_MODULE_5__.Z)(new Date),firstDate=(0,date_fns__WEBPACK_IMPORTED_MODULE_6__.Z)(new Date,yearsAgo);firstDate=(0,date_fns__WEBPACK_IMPORTED_MODULE_7__.Z)(firstDate);var binStep=60/binsPerHour;return(0,d3__WEBPACK_IMPORTED_MODULE_4__.Nus)(firstDate,lastDate).map((function(dateElement){var start=(0,date_fns__WEBPACK_IMPORTED_MODULE_8__.Z)(dateElement),end=(0,date_fns__WEBPACK_IMPORTED_MODULE_9__.Z)(dateElement),details=(0,d3__WEBPACK_IMPORTED_MODULE_4__.Xox)(start,end,binStep).map((function(e){return{date:e.toISOString(),value:Math.round(100*Math.random())}})),total=details.reduce((function(acc,e){return acc+e.value}),0);return{date:start.toISOString(),details,total}}))}},"./src/utils.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{D0:()=>createColorGenerator,DW:()=>getXScaleAndAxis,Fe:()=>fadeAwayElements,Lq:()=>getColor,Xe:()=>addAxisLabelResponsivness,jH:()=>getYScaleAndAxis,yF:()=>removeLastYearWeekData});__webpack_require__("./node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("./node_modules/core-js/modules/es.promise.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.number.is-finite.js"),__webpack_require__("./node_modules/core-js/modules/es.number.constructor.js"),__webpack_require__("./node_modules/core-js/modules/es.array.join.js");var _d3fc_d3fc_axis__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@d3fc/d3fc-axis/src/axisLabelOffset.js"),_d3fc_d3fc_axis__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@d3fc/d3fc-axis/src/axisLabelRotate.js"),_d3fc_d3fc_axis__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@d3fc/d3fc-axis/src/axis.js"),d3__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/d3/src/index.js");function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function addAxisLabelResponsivness(axis,response){var output=axis;switch(response){case"offset":output=(0,_d3fc_d3fc_axis__WEBPACK_IMPORTED_MODULE_7__.Z)(axis);break;case"rotate":output=(0,_d3fc_d3fc_axis__WEBPACK_IMPORTED_MODULE_8__.Z)(axis);break;default:output=function axisLabelHide(axis){return(0,_d3fc_d3fc_axis__WEBPACK_IMPORTED_MODULE_7__.Z)(axis).decorate((function(container){var firstNodeTransformValue=container.select("text").attr("transform");return container.selectAll("text").each((function(){(0,d3__WEBPACK_IMPORTED_MODULE_6__.Ys)(this).attr("transform")!==firstNodeTransformValue&&(0,d3__WEBPACK_IMPORTED_MODULE_6__.Ys)(this).attr("visibility","hidden")})),container}))}(axis)}return output}function getXScaleAndAxis(_ref){var labels=_ref.labels,element=_ref.element,margin=_ref.margin,paddingInner=_ref.paddingInner,response=_ref.response,align=_ref.align,range=element.clientWidth-margin.left-margin.right;range=range>0?range:0;var xScale=(0,d3__WEBPACK_IMPORTED_MODULE_6__.tiA)().domain(labels).range([0,range]).paddingInner(paddingInner),xAxis=("bottom"===align?_d3fc_d3fc_axis__WEBPACK_IMPORTED_MODULE_9__.LL:_d3fc_d3fc_axis__WEBPACK_IMPORTED_MODULE_9__.F5)(xScale).tickValues(labels).tickSize(0);return[xScale,xAxis=addAxisLabelResponsivness(xAxis,response)]}function getYScaleAndAxis(_ref2){var labels=_ref2.labels,element=_ref2.element,margin=_ref2.margin,paddingInner=_ref2.paddingInner,response=_ref2.response,range=element.clientHeight-margin.top-margin.bottom;range=range>0?range:0;var yScale=(0,d3__WEBPACK_IMPORTED_MODULE_6__.tiA)().domain(labels).range([0,range]).paddingInner(paddingInner),yAxis=(0,_d3fc_d3fc_axis__WEBPACK_IMPORTED_MODULE_9__.y4)(yScale).tickValues(labels).tickSize(0);return[yScale,yAxis=addAxisLabelResponsivness(yAxis,response)]}function getHSL(val){return(0,d3__WEBPACK_IMPORTED_MODULE_6__.Ym7)(360*val,.85,.7).formatHsl()}function createColorGenerator(minValue,maxValue,color){var colorGenerator,initialColor=function getDrilldownBackgroundColor(){var container=document.querySelectorAll(".dark, .light"),initialColor="#ffffff";if(container.length>0){var backgroundColor=getComputedStyle(container[0]).getPropertyValue("--background_color");initialColor=""===backgroundColor?initialColor:backgroundColor}return initialColor}();switch(color){case"spectral":colorGenerator=(0,d3__WEBPACK_IMPORTED_MODULE_6__.cJy)().domain([maxValue,minValue]).interpolator(d3__WEBPACK_IMPORTED_MODULE_6__.T0$);break;case"hsl":colorGenerator=(0,d3__WEBPACK_IMPORTED_MODULE_6__.cJy)().domain([minValue,maxValue]).interpolator(getHSL);break;case"hslModified":colorGenerator=(0,d3__WEBPACK_IMPORTED_MODULE_6__.BYU)().domain([minValue,(minValue+maxValue)/2,maxValue]).range([(0,d3__WEBPACK_IMPORTED_MODULE_6__.Ym7)(180,.85,.6).formatHsl(),"white",(0,d3__WEBPACK_IMPORTED_MODULE_6__.Ym7)(0,.85,.6).formatHsl()]);break;case null:case void 0:colorGenerator=(0,d3__WEBPACK_IMPORTED_MODULE_6__.BYU)().range([initialColor,"#ff4500"]).domain([minValue,maxValue]);break;default:colorGenerator=(0,d3__WEBPACK_IMPORTED_MODULE_6__.BYU)().range([initialColor,color]).domain([minValue,maxValue])}return colorGenerator}function removeLastYearWeekData(dataArray){var updatedDataArray=[];if(dataArray.length>0){var firstDayOfYear=dataArray[0].day;if(updatedDataArray=dataArray,firstDayOfYear>=5){var numberOfDaysToCompleteLastYearWeek=8-firstDayOfYear;updatedDataArray=dataArray.slice(numberOfDaysToCompleteLastYearWeek)}}return updatedDataArray}function fadeAwayElements(_x){return _fadeAwayElements.apply(this,arguments)}function _fadeAwayElements(){return(_fadeAwayElements=_asyncToGenerator(regeneratorRuntime.mark((function _callee(selectorsList){var selectors;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return selectors=selectorsList.join(","),_context.abrupt("return",(0,d3__WEBPACK_IMPORTED_MODULE_6__.td_)(selectors).transition().duration(500).ease(d3__WEBPACK_IMPORTED_MODULE_6__.Nyw).style("opacity",0).end());case 2:case"end":return _context.stop()}}),_callee)})))).apply(this,arguments)}function getColor(colorGenerator,value){return Number.isFinite(value)?colorGenerator(value):"var(--background_color)"}}}]);